<div class="document-list-container">
  <div class="header">
    <h2>Document Management System</h2>
    <button class="create-btn" (click)="onCreateDocument()">Create New Document</button>
  </div>
  
  <div class="filters">
    <mat-form-field>
      <mat-label>Filter by Status</mat-label>
      <mat-select [(value)]="statusFilter" (selectionChange)="applyFilters()">
        <mat-option [value]="null">All Documents</mat-option>
        <mat-option *ngFor="let status of documentStatuses" [value]="status">
          {{ status }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    
    <mat-form-field>
      <mat-label>Search</mat-label>
      <input matInput [(ngModel)]="searchTerm" placeholder="Search by title" (keyup)="applyFilters()">
      <button *ngIf="searchTerm" matSuffix mat-icon-button aria-label="Clear" (click)="searchTerm=''; applyFilters()">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </div>

  <div *ngIf="loading" class="loading-spinner">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!loading && filteredDocuments.length === 0" class="no-documents">
    <p>No documents found</p>
  </div>

  <div *ngIf="!loading && filteredDocuments.length > 0" class="document-table">
    <table mat-table [dataSource]="filteredDocuments" class="mat-elevation-z8">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let document">{{ document.title }}</td>
      </ng-container>
      
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let document">
          <span class="status-chip" [ngClass]="'status-' + document.status.toLowerCase()">
            {{ document.status }}
          </span>
        </td>
      </ng-container>
      
      <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef>Created</th>
        <td mat-cell *matCellDef="let document">{{ document.createdAt | date:'short' }}</td>
      </ng-container>
      
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let document">
          <button mat-icon-button [matMenuTriggerFor]="actionsMenu" aria-label="Document actions">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #actionsMenu="matMenu">
            <button mat-menu-item (click)="onViewDocument(document.id)">
              <mat-icon>visibility</mat-icon>
              <span>View</span>
            </button>
            <button mat-menu-item (click)="onEditDocument(document.id)" *ngIf="canEditDocument(document)">
              <mat-icon>edit</mat-icon>
              <span>Edit</span>
            </button>
            <button mat-menu-item (click)="onSubmitForReview(document)" *ngIf="canSubmitForReview(document)">
              <mat-icon>send</mat-icon>
              <span>Submit for Review</span>
            </button>
            <button mat-menu-item (click)="onRecallDocument(document)" *ngIf="canRecallDocument(document)">
              <mat-icon>undo</mat-icon>
              <span>Recall Document</span>
            </button>
            <button mat-menu-item (click)="onReviewDocument(document)" *ngIf="canReviewDocument(document)">
              <mat-icon>rate_review</mat-icon>
              <span>Review Document</span>
            </button>
            <button mat-menu-item (click)="onDeleteDocument(document.id)" *ngIf="canDeleteDocument(document)">
              <mat-icon>delete</mat-icon>
              <span>Delete</span>
            </button>
          </mat-menu>
        </td>
      </ng-container>
      
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onViewDocument(row.id)" class="document-row"></tr>
    </table>
    
    <mat-paginator [length]="totalDocuments"
                  [pageSize]="pageSize"
                  [pageSizeOptions]="[5, 10, 25, 50]"
                  (page)="onPageChange($event)">
    </mat-paginator>
  </div>
</div> 